@using Shared.Models;
@{
    Layout = "../Shared/_ListLayout.cshtml";
    ViewBag.Title = "Routines";
    ViewBag.Subtitle = "Listing";
}

@section pagescripts{
    <script src="~/Scripts/Theme/Routine.js" type="text/javascript"></script>
    <script type="text/javascript">
        $('select[name="entry-count"]').on('change', function () {
            $('.dt-helper-table').DataTable().page.len(+$(this).val());
            $('.dt-helper-table').DataTable().draw(false);
        });


    </script>
}

@section pagestyles {
    <link href="~/Content/UserDetails.min.css" rel="stylesheet" type="text/css" />
}

<div class="datatable-holder">
    <div class="row form-inline">
        <a href="/Routine/Create"><button class="btn add-button">Add Routine&nbsp;&nbsp;<i class="fa fa-plus"></i></button></a>
        <div class="pull-right" id="UserTableModel_search">
            <select class="bs-select form-control ignore-filter" name="entry-count">
                <option value="10">Show 10 entries per page</option>
                <option value="30" selected>Show 30 entries per page</option>
                <option value="50">Show 50 entries per page</option>
                <option value="100">Show 100 entries per page</option>
            </select>
            <span>&nbsp;</span>
            <label for="UserTableModel_search">Search: </label>
            <input type="text" class="form-control dt-helper-search" name="UserTableModel_search" />
        </div>
    </div>
    <div class="row">
        <table class="table table-striped table-bordered table-hover dt-responsive dt-helper-table" draw-context="ContextData" ajax-url="/Routine/RowJSON">
            <thead>
                <tr>
                    <th>Routine Name</th>
                    <th>Number of Routine Activities</th>
                    <th>Number of Assigned Users</th>
                    <th class="all">Actions</th>
                </tr>
            </thead>
            <tfoot>
                <tr></tr>
            </tfoot>
        </table>
    </div>
</div>

<script type="text/javascript">

    var dtOrder = [[0, 'asc']];
    var SaferMeDTCols = [
        {
            "data": "Name",
            "name": "Routine Name",
            "responsivePriority":0,
        },
        {
            "data": "RoutineItemCount",
            "name": "Number of Routine Activities",
            "responsivePriority": 0,
            "searchable": false,
        },
        {
            "data": "AssignedUsers",
            "name": "Number of Assigned Users",
            "responsivePriority": 0,
            "searchable": false,
        },
        {
            "data": "Actions",
            "orderable": false,
            "searchable": false,
        },
    ];
</script>